[supervisord]
nodaemon=true

[program:php-fpm]
command=php-fpm --nodaemonize
autostart=true
autorestart=true
stopsignal=QUIT  # âœ… Ensure PHP-FPM stops gracefully

[program:queue-worker]
command=php /var/www/html/artisan queue:work --timeout=3600 --tries=3
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/www/html/storage/logs/queue-worker.log
stopsignal=TERM

[program:event-queue-worker]
command=php /var/www/html/artisan queue:work --queue=high --tries=3
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/www/html/storage/logs/event-queue-worker.log
stopsignal=TERM

[program:reverb]
command=php /var/www/html/artisan reverb:start
autostart=true
autorestart=true
redirect_stderr=true
stdout_logfile=/var/www/html/storage/logs/reverb.log
stopsignal=TERM
